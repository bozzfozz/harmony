{% import "partials/_strings.j2" as strings %}

<div id="hx-activity-table"
     class="table-fragment"
     data-total="{{ total_count }}"
     data-limit="{{ limit }}"
     data-offset="{{ offset }}">
  {% if rows %}
    <table>
      <caption>{{ strings.caption("activity.table.caption") }}</caption>
      <thead>
        <tr>
          <th scope="col">{{ strings.table_header("activity.timestamp") }}</th>
          <th scope="col">{{ strings.table_header("activity.type") }}</th>
          <th scope="col">{{ strings.table_header("activity.status") }}</th>
          <th scope="col">{{ strings.table_header("activity.details") }}</th>
        </tr>
      </thead>
      <tbody>
        {% for row in rows %}
          <tr>
            <td>{{ row["timestamp"] }}</td>
            <td>{{ row["type"] }}</td>
            <td>{{ row["status"] }}</td>
            <td>{% if row["details"] %}{{ row["details"] }}{% else %}&mdash;{% endif %}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="empty-state">{{ strings.activity_empty_state() }}</p>
  {% endif %}
  {% set prev_url = pagination.get('prev_url') %}
  {% set next_url = pagination.get('next_url') %}
  {% if prev_url or next_url %}
    <nav class="pagination"
         aria-label="{{ strings.pagination_label('activity') }}">
      {% if prev_url %}
        <button type="button"
                hx-get="{{ prev_url }}"
                hx-target="#hx-activity-table"
                hx-swap="outerHTML">
          {{ strings.pagination_prev() }}
        </button>
      {% endif %}
      {% if next_url %}
        <button type="button"
                hx-get="{{ next_url }}"
                hx-target="#hx-activity-table"
                hx-swap="outerHTML">
          {{ strings.pagination_next() }}
        </button>
      {% endif %}
    </nav>
  {% endif %}
</div>
