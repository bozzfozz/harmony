{% macro app_name() %}Harmony Operator Console{% endmacro %}

{% macro page_title(page_id) -%}
  {%- set titles = {
    "login": "Login",
    "dashboard": "Dashboard",
    "activity": "Activity",
    "watchlist": "Watchlist",
    "spotify": "Spotify",
    "search": "Soulseek search",
    "soulseek": "Soulseek",
  } -%}
  {%- if page_id in titles -%}
    {{ titles[page_id] }} · {{ app_name() }}
  {%- else -%}
    {{ page_id }} · {{ app_name() }}
  {%- endif -%}
{%- endmacro %}

{% macro section_heading(page_id) -%}
  {%- set headings = {
    "login": "Sign in",
    "dashboard": "Welcome",
    "activity": "Recent activity",
    "watchlist": "Watchlist",
    "spotify": "Spotify integration",
    "search": "Soulseek search",
    "soulseek": "Soulseek integration",
  } -%}
  {%- if page_id in headings -%}
    {{ headings[page_id] }}
  {%- else -%}
    {{ page_id }}
  {%- endif -%}
{%- endmacro %}

{% macro nav_label(key) -%}
  {%- set labels = {
    "nav.home": "Home",
    "nav.spotify": "Spotify",
    "nav.soulseek": "Soulseek",
    "nav.operations": "Operations",
    "nav.admin": "Admin",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro form_label(key) -%}
  {%- set labels = {
    "login.api_key": "API key",
    "search.query": "Search query",
    "search.limit": "Result limit",
    "search.sources.legend": "Sources",
    "search.sources.spotify": "Spotify",
    "search.sources.soulseek": "Soulseek",
    "spotify.manual.redirect": "Redirect URL",
    "spotify.backfill.max_items": "Max items",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro form_help(key) -%}
  {%- set labels = {
    "search.sources.description": "Select the providers to include in your search.",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro button_label(key) -%}
  {%- set labels = {
    "login.submit": "Login",
    "logout": "Logout",
    "dashboard.action.operator": "Operator action",
    "dashboard.action.admin": "Admin action",
    "spotify.connect": "Connect",
    "spotify.manual.submit": "Complete manually",
    "spotify.backfill.run": "Start backfill",
    "search.submit": "Search",
    "search.action.queue": "Queue download",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro status_badge_label(key) -%}
  {%- set labels = {
    "status.enabled": "Enabled",
    "status.disabled": "Disabled",
    "soulseek.status.connected": "Connected",
    "soulseek.status.degraded": "Limited",
    "soulseek.status.disconnected": "Disconnected",
    "soulseek.status.unknown": "Unknown",
    "soulseek.integration.ok": "Healthy",
    "soulseek.integration.degraded": "Degraded",
    "soulseek.integration.down": "Offline",
    "soulseek.integration.unknown": "Unknown",
    "spotify.status.connected": "Connected",
    "spotify.status.unauthenticated": "Authentication required",
    "spotify.status.unconfigured": "Not configured",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro table_header(key) -%}
  {%- set labels = {
    "dashboard.features.name": "Feature",
    "dashboard.features.status": "Status",
    "soulseek.providers.name": "Provider",
    "soulseek.providers.status": "Status",
    "soulseek.providers.details": "Details",
    "soulseek.config.setting": "Setting",
    "soulseek.config.value": "Value",
    "activity.timestamp": "Timestamp",
    "activity.type": "Type",
    "activity.status": "Status",
    "activity.details": "Details",
    "watchlist.artist": "Artist",
    "watchlist.priority": "Priority",
    "watchlist.state": "State",
    "downloads.id": "ID",
    "downloads.filename": "Filename",
    "downloads.status": "Status",
    "downloads.progress": "Progress",
    "downloads.priority": "Priority",
    "downloads.user": "User",
    "downloads.updated": "Updated",
    "jobs.name": "Job",
    "jobs.status": "Status",
    "jobs.enabled": "Enabled",
    "search.title": "Title",
    "search.artist": "Artist",
    "search.source": "Source",
    "search.score": "Score",
    "search.bitrate": "Bitrate",
    "search.actions": "Actions",
    "spotify.playlists.name": "Playlist",
    "spotify.playlists.tracks": "Tracks",
    "spotify.playlists.updated": "Updated",
    "spotify.artists.name": "Artist",
    "spotify.artists.followers": "Followers",
    "spotify.artists.popularity": "Popularity",
    "spotify.artists.genres": "Genres",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro caption(key) -%}
  {%- set labels = {
    "dashboard.features.caption": "Available features",
    "activity.table.caption": "Recent system activity",
    "watchlist.table.caption": "Tracked artists",
    "downloads.table.caption": "Download queue",
    "jobs.table.caption": "Orchestrator jobs",
    "search.results.caption": "Search results",
    "spotify.playlists.caption": "Tracked Spotify playlists",
    "spotify.artists.caption": "Followed Spotify artists",
    "soulseek.providers.caption": "Provider health",
    "soulseek.config.caption": "Soulseek configuration",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro table_cell(key) -%}
  {%- set labels = {
    "feature.spotify": "Spotify tools",
    "feature.soulseek": "Soulseek tools",
    "feature.dlq": "DLQ tools",
    "feature.imports": "Imports",
    "soulseek.providers.details.none": "No additional details",
    "soulseek.config.base_url": "API base URL",
    "soulseek.config.api_key": "API key",
    "soulseek.config.timeout": "Request timeout",
    "soulseek.config.retry_max": "Retry attempts",
    "soulseek.config.retry_backoff": "Retry backoff",
    "soulseek.config.retry_jitter": "Retry jitter",
    "soulseek.config.preferred_formats": "Preferred formats",
    "soulseek.config.max_results": "Max results",
    "soulseek.config.security_profile": "Security profile",
    "soulseek.config.require_auth": "Authentication required",
    "soulseek.config.rate_limiting": "Rate limiting",
    "watchlist.state.active": "Active",
    "watchlist.state.paused": "Paused",
    "spotify.status.connected": "Connected",
    "spotify.status.unauthenticated": "Authentication required",
    "spotify.status.unconfigured": "Not configured",
    "search.action.unavailable": "Not available",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro role_name(role) -%}
  {%- set labels = {
    "read_only": "Read only",
    "operator": "Operator",
    "admin": "Admin",
  } -%}
  {%- if role in labels -%}
    {{ labels[role] }}
  {%- else -%}
    {{ role }}
  {%- endif -%}
{%- endmacro %}

{% macro dashboard_role_label(role) -%}
  Current role: {{ role_name(role) }}
{%- endmacro %}

{% macro dashboard_features_heading() %}Feature availability{% endmacro %}

{% macro dashboard_actions_heading() %}Available actions{% endmacro %}

{% macro dashboard_activity_heading() %}Recent activity{% endmacro %}

{% macro loading_placeholder() %}Loading…{% endmacro %}

{% macro activity_empty_state() %}No recent activity recorded yet.{% endmacro %}

{% macro watchlist_empty_state() %}No artists are tracked on the watchlist.{% endmacro %}

{% macro fragment_loading(key) -%}
  {%- if key == "loading" -%}
    {{ loading_placeholder() }}
  {%- elif key == "spotify.status" -%}
    Checking Spotify connection…
  {%- elif key == "spotify.playlists" -%}
    Loading cached Spotify playlists…
  {%- elif key == "spotify.artists" -%}
    Loading followed Spotify artists…
  {%- elif key == "spotify.backfill" -%}
    Fetching Spotify backfill status…
  {%- elif key == "search.results" -%}
    Waiting for search results…
  {%- elif key == "search.queue" -%}
    Loading the Soulseek queue…
  {%- elif key == "soulseek.status" -%}
    Checking Soulseek connection…
  {%- elif key == "soulseek.configuration" -%}
    Loading Soulseek configuration…
  {%- elif key == "soulseek.uploads" -%}
    Loading active Soulseek uploads…
  {%- elif key == "soulseek.downloads" -%}
    Loading active Soulseek downloads…
  {%- else -%}
    {{ loading_placeholder() }}
  {%- endif -%}
{%- endmacro %}

{% macro empty_state(key) -%}
  {%- if key == "activity" -%}
    {{ activity_empty_state() }}
  {%- elif key == "watchlist" -%}
    {{ watchlist_empty_state() }}
  {%- elif key == "downloads" -%}
    No downloads are currently queued.
  {%- elif key == "jobs" -%}
    No orchestrator jobs reported yet.
  {%- elif key == "search" -%}
    No matching results found.
  {%- elif key == "spotify.playlists" -%}
    No playlists are currently cached from Spotify.
  {%- elif key == "spotify.artists" -%}
    No Spotify artists are currently followed.
  {%- else -%}
    {{ key }}
  {%- endif -%}
{%- endmacro %}

{% macro pagination_label(key) -%}
  {%- set labels = {
    "activity": "Activity pagination",
    "watchlist": "Watchlist pagination",
    "downloads": "Downloads pagination",
    "search": "Search pagination",
    "jobs": "Jobs pagination",
    "spotify.playlists": "Spotify playlists pagination",
    "spotify.artists": "Spotify artists pagination",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro spotify_status_hint(status) -%}
  {%- if status == "connected" -%}
    Spotify API access is active. You can manage playlists and backfill jobs.
  {%- elif status == "unauthenticated" -%}
    Authentication is required. Use the Connect button or manual completion form.
  {%- else -%}
    Provide Spotify credentials in the settings before connecting.
  {%- endif -%}
{%- endmacro %}

{% macro spotify_manual_hint(oauth, status) -%}
  {%- if oauth.manual_enabled -%}
    Manual completion is enabled. Paste the full redirect URL from Spotify to finish the flow.
  {%- elif status.pro_available -%}
    Manual completion is disabled. Use the Connect button to authenticate through Spotify.
  {%- else -%}
    Manual completion is unavailable until Spotify credentials are configured.
  {%- endif -%}
{%- endmacro %}

{% macro spotify_backfill_hint() -%}
  Trigger a Spotify enrichment job for pending FREE ingest items. Requires a valid Spotify session.
{%- endmacro %}

{% macro spotify_manual_host_hint(host) -%}
  Ensure the public host is reachable at {{ host }} before starting manual completion.
{%- endmacro %}

{% macro spotify_manual_redirect_label() %}Redirect URI{% endmacro %}

{% macro spotify_manual_active_label() %}Active manual sessions{% endmacro %}

{% macro spotify_manual_ttl_label() %}Manual session timeout{% endmacro %}

{% macro spotify_manual_ttl(value) -%}
  {%- if value and value > 0 -%}
    {{ value }} seconds
  {%- else -%}
    No active manual sessions
  {%- endif -%}
{%- endmacro %}

{% macro spotify_backfill_expand_label() %}Expand playlists after enrichment{% endmacro %}

{% macro spotify_backfill_latest_heading() %}Latest job{% endmacro %}

{% macro spotify_backfill_field_label(key) -%}
  {%- set labels = {
    "id": "Job ID",
    "state": "State",
    "requested": "Requested",
    "processed": "Processed",
    "matched": "Matched",
    "cache_hits": "Cache hits",
    "cache_misses": "Cache misses",
    "expanded_playlists": "Expanded playlists",
    "expanded_tracks": "Expanded tracks",
    "duration": "Duration",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}

{% macro spotify_backfill_unknown_state() %}unknown{% endmacro %}

{% macro spotify_backfill_duration(value) -%}
  {%- if value -%}
    {{ value }} ms
  {%- else -%}
    —
  {%- endif -%}
{%- endmacro %}

{% macro spotify_backfill_empty_state() %}No backfill job has been recorded yet.{% endmacro %}

{% macro spotify_page_intro() %}Manage the Spotify connection, followed artists, cached playlists, and backfill jobs.{% endmacro %}

{% macro spotify_status_heading() %}Connection status{% endmacro %}

{% macro spotify_playlists_heading() %}Cached playlists{% endmacro %}

{% macro spotify_artists_heading() %}Followed artists{% endmacro %}

{% macro spotify_backfill_heading() %}Backfill jobs{% endmacro %}

{% macro pagination_prev() %}Previous{% endmacro %}

{% macro pagination_next() %}Next{% endmacro %}

{% macro fragment_error_default() %}The requested data could not be loaded. Please try again.{% endmacro %}

{% macro login_description() %}Use your Harmony API key to access the operator console.{% endmacro %}

{% macro search_page_intro() %}Run Soulseek searches and monitor the active download queue.{% endmacro %}

{% macro search_form_heading() %}Search Soulseek{% endmacro %}

{% macro search_form_description() %}Enter a query to search across configured music sources.{% endmacro %}

{% macro search_results_heading() %}Results{% endmacro %}

{% macro search_results_placeholder() %}Submit a query to view matching files.{% endmacro %}

{% macro search_queue_heading() %}Download queue{% endmacro %}

{% macro search_queue_description() %}The queue refreshes automatically while this page remains open.{% endmacro %}

{% macro soulseek_page_intro() %}Monitor the Soulseek integration and manage transfer activity.{% endmacro %}

{% macro soulseek_status_heading() %}Connection status{% endmacro %}

{% macro soulseek_connection_label() %}Daemon connectivity{% endmacro %}

{% macro soulseek_integrations_label() %}Integration health{% endmacro %}

{% macro soulseek_providers_heading() %}Provider diagnostics{% endmacro %}

{% macro soulseek_configuration_heading() %}Configuration{% endmacro %}

{% macro soulseek_uploads_heading() %}Active uploads{% endmacro %}

{% macro soulseek_downloads_heading() %}Active downloads{% endmacro %}

{% macro modal_title(key) -%}
  {%- set labels = {
    "confirm": "Confirm",
  } -%}
  {{ labels.get(key, key) }}
{%- endmacro %}
