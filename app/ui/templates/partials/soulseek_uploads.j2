{% import "partials/_strings.j2" as strings %}
{% import "partials/tables.j2" as tables %}

<div class="table-controls">
  <div class="table-controls__group">
    <button type="button"
            hx-get="{{ active_url }}"
            hx-target="#hx-soulseek-uploads"
            hx-swap="outerHTML"
            {% if not include_all %}disabled{% endif %}>
      {{ strings.button_label("soulseek.uploads.show_active") }}
    </button>
    <button type="button"
            hx-get="{{ all_url }}"
            hx-target="#hx-soulseek-uploads"
            hx-swap="outerHTML"
            {% if include_all %}disabled{% endif %}>
      {{ strings.button_label("soulseek.uploads.show_all") }}
    </button>
  </div>
  <div class="table-controls__group">
    <button type="button"
            hx-get="{{ refresh_url }}"
            hx-target="#hx-soulseek-uploads"
            hx-swap="outerHTML">
      {{ strings.button_label("soulseek.uploads.refresh") }}
    </button>
    <form method="post"
          action="{{ cleanup_url }}"
          hx-post="{{ cleanup_url }}"
          hx-target="{{ cleanup_target }}"
          hx-swap="{{ cleanup_swap }}">
      <input type="hidden" name="csrftoken" value="{{ csrf_token }}" />
      {% if include_all %}
        <input type="hidden" name="scope" value="all" />
      {% endif %}
      <button type="submit"
              data-test="soulseek-uploads-cleanup"
              {% if cleanup_disabled %}disabled{% endif %}>
        {{ strings.button_label("soulseek.uploads.cleanup") }}
      </button>
    </form>
  </div>
</div>

{{ tables.render_table_fragment(fragment) }}
